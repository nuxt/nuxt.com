<template>
  <div class="relative flex">
    <div>
      <svg
        width="756"
        height="367"
        viewBox="0 0 756 367"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="text-gray-800 dark:text-gray-900"
      >
        <rect width="756" height="367" rx="14.2105" fill="currentColor" />
        <rect y="35" width="756" height="1" fill="#3F3F46" />
        <path d="M71.9999 109.94C71.9895 109.848 71.9693 109.758 71.9399 109.67V109.58C71.8918 109.477 71.8277 109.383 71.7499 109.3L65.7499 103.3C65.6672 103.222 65.5727 103.158 65.4699 103.11H65.3799L65.0599 103H58.9999C58.2042 103 57.4412 103.316 56.8786 103.879C56.3159 104.441 55.9999 105.204 55.9999 106V120C55.9999 120.796 56.3159 121.559 56.8786 122.121C57.4412 122.684 58.2042 123 58.9999 123H68.9999C69.7955 123 70.5586 122.684 71.1212 122.121C71.6838 121.559 71.9999 120.796 71.9999 120V110C71.9999 110 71.9999 110 71.9999 109.94ZM65.9999 106.41L68.5899 109H65.9999V106.41ZM69.9999 120C69.9999 120.265 69.8945 120.52 69.707 120.707C69.5194 120.895 69.2651 121 68.9999 121H58.9999C58.7347 121 58.4803 120.895 58.2928 120.707C58.1052 120.52 57.9999 120.265 57.9999 120V106C57.9999 105.735 58.1052 105.48 58.2928 105.293C58.4803 105.105 58.7347 105 58.9999 105H63.9999V110C63.9999 110.265 64.1052 110.52 64.2928 110.707C64.4803 110.895 64.7347 111 64.9999 111H69.9999V120Z" fill="#00DC82" />
        <path d="M71.9999 228.94C71.9895 228.848 71.9693 228.757 71.9399 228.67V228.58C71.8918 228.477 71.8277 228.382 71.7499 228.3L65.7499 222.3C65.6672 222.222 65.5727 222.158 65.4699 222.11H65.3799L65.0599 222H58.9999C58.2042 222 57.4412 222.316 56.8786 222.878C56.3159 223.441 55.9999 224.204 55.9999 225V239C55.9999 239.795 56.3159 240.558 56.8786 241.121C57.4412 241.683 58.2042 242 58.9999 242H68.9999C69.7955 242 70.5586 241.683 71.1212 241.121C71.6838 240.558 71.9999 239.795 71.9999 239V229C71.9999 229 71.9999 229 71.9999 228.94ZM65.9999 225.41L68.5899 228H65.9999V225.41ZM69.9999 239C69.9999 239.265 69.8945 239.519 69.707 239.707C69.5194 239.894 69.2651 240 68.9999 240H58.9999C58.7347 240 58.4803 239.894 58.2928 239.707C58.1052 239.519 57.9999 239.265 57.9999 239V225C57.9999 224.734 58.1052 224.48 58.2928 224.292C58.4803 224.105 58.7347 224 58.9999 224H63.9999V229C63.9999 229.265 64.1052 229.519 64.2928 229.707C64.4803 229.894 64.7347 230 64.9999 230H69.9999V239Z" fill="#A1A1AA" />
        <path ref="secondLineFolder" d="M71.9999 268.94C71.9895 268.848 71.9693 268.757 71.9399 268.67V268.58C71.8918 268.477 71.8277 268.382 71.7499 268.3L65.7499 262.3C65.6672 262.222 65.5727 262.158 65.4699 262.11H65.3799L65.0599 262H58.9999C58.2042 262 57.4412 262.316 56.8786 262.878C56.3159 263.441 55.9999 264.204 55.9999 265V279C55.9999 279.795 56.3159 280.558 56.8786 281.121C57.4412 281.683 58.2042 282 58.9999 282H68.9999C69.7955 282 70.5586 281.683 71.1212 281.121C71.6838 280.558 71.9999 279.795 71.9999 279V269C71.9999 269 71.9999 269 71.9999 268.94ZM65.9999 265.41L68.5899 268H65.9999V265.41ZM69.9999 279C69.9999 279.265 69.8945 279.519 69.707 279.707C69.5194 279.894 69.2651 280 68.9999 280H58.9999C58.7347 280 58.4803 279.894 58.2928 279.707C58.1052 279.519 57.9999 279.265 57.9999 279V265C57.9999 264.734 58.1052 264.48 58.2928 264.292C58.4803 264.105 58.7347 264 58.9999 264H63.9999V269C63.9999 269.265 64.1052 269.519 64.2928 269.707C64.4803 269.894 64.7347 270 64.9999 270H69.9999V279Z" fill="#A1A1AA" />
        <path d="M32.7102 70.8297L36.9502 66.5897C37.044 66.4967 37.1184 66.3861 37.1691 66.2643C37.2199 66.1424 37.246 66.0117 37.246 65.8797C37.246 65.7477 37.2199 65.617 37.1691 65.4951C37.1184 65.3733 37.044 65.2627 36.9502 65.1697C36.7629 64.9834 36.5094 64.8789 36.2452 64.8789C35.981 64.8789 35.7276 64.9834 35.5402 65.1697L32.0002 68.7097L28.4602 65.1697C28.2729 64.9834 28.0194 64.8789 27.7552 64.8789C27.491 64.8789 27.2376 64.9834 27.0502 65.1697C26.9576 65.2631 26.8842 65.374 26.8345 65.4958C26.7847 65.6176 26.7595 65.7481 26.7602 65.8797C26.7595 66.0113 26.7847 66.1418 26.8345 66.2636C26.8842 66.3854 26.9576 66.4963 27.0502 66.5897L31.2902 70.8297C31.3832 70.9234 31.4938 70.9978 31.6157 71.0486C31.7375 71.0994 31.8682 71.1255 32.0002 71.1255C32.1322 71.1255 32.263 71.0994 32.3848 71.0486C32.5067 70.9978 32.6173 70.9234 32.7102 70.8297Z" fill="white" />
        <path d="M32.7102 189.83L36.9502 185.59C37.044 185.497 37.1184 185.387 37.1691 185.265C37.2199 185.143 37.246 185.012 37.246 184.88C37.246 184.748 37.2199 184.617 37.1691 184.496C37.1184 184.374 37.044 184.263 36.9502 184.17C36.7629 183.984 36.5094 183.879 36.2452 183.879C35.981 183.879 35.7276 183.984 35.5402 184.17L32.0002 187.71L28.4602 184.17C28.2729 183.984 28.0194 183.879 27.7552 183.879C27.491 183.879 27.2376 183.984 27.0502 184.17C26.9576 184.264 26.8842 184.374 26.8345 184.496C26.7847 184.618 26.7595 184.749 26.7602 184.88C26.7595 185.012 26.7847 185.142 26.8345 185.264C26.8842 185.386 26.9576 185.497 27.0502 185.59L31.2902 189.83C31.3832 189.924 31.4938 189.998 31.6157 190.049C31.7375 190.1 31.8682 190.126 32.0002 190.126C32.1322 190.126 32.263 190.1 32.3848 190.049C32.5067 189.998 32.6173 189.924 32.7102 189.83Z" fill="white" />
        <line
          x1="33"
          y1="90"
          x2="33"
          y2="149"
          stroke="url(#paint0_linear_4107_49654)"
          stroke-width="2"
        />
        <line
          x1="33"
          y1="209"
          x2="33"
          y2="332"
          stroke="url(#paint1_linear_4107_49654)"
          stroke-width="2"
        />
        <rect
          x="230"
          y="367"
          width="332"
          height="1.00003"
          transform="rotate(-90 230 367)"
          fill="#3F3F46"
        />
        <circle cx="17.4999" cy="17.5" r="5.5" fill="#3F3F46" />
        <circle cx="34.4999" cy="17.5" r="5.5" fill="#3F3F46" />
        <circle cx="52.4999" cy="17.5" r="5.5" fill="#3F3F46" />
        <defs>
          <linearGradient
            id="paint0_linear_4107_49654"
            x1="32"
            y1="90"
            x2="32"
            y2="149.791"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#71717A" />
            <stop offset="1" stop-color="#71717A" stop-opacity="0" />
          </linearGradient>
          <linearGradient
            id="paint1_linear_4107_49654"
            x1="32"
            y1="209"
            x2="32"
            y2="333.649"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#71717A" />
            <stop offset="1" stop-color="#71717A" stop-opacity="0" />
          </linearGradient>
        </defs>
      </svg>
      <div class="absolute top-[52px] left-[54px] text-gray-400">
        <span class="absolute transition-opacity duration-300" :class="section1Steps.concat(section3Steps).includes(currentSection) ? 'opacity-100' : 'opacity-0'">pages</span>
        <span class="absolute transition-opacity duration-300" :class="section2Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">components</span>
      </div>
      <div class="absolute top-[100px] left-[88px] text-white">
        <span class="absolute transition-opacity duration-300" :class="section1Steps.concat(section3Steps).includes(currentSection) ? 'opacity-100' : 'opacity-0'">index.vue</span>
        <span class="absolute transition-opacity duration-300" :class="section2Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">Mouse.vue</span>
      </div>
      <div class="absolute top-[47%] left-[52px] text-gray-400">
        <span class="absolute transition-opacity duration-300" :class="section1Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">components</span>
        <span class="absolute transition-opacity duration-300" :class="section2Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">composables</span>
        <span class="absolute transition-opacity duration-300" :class="section3Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">plugins</span>
      </div>
      <div class="absolute top-[218px] left-[88px] text-gray-400">
        <span class="absolute transition-opacity duration-300" :class="section1Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">header.vue</span>
        <span class="absolute transition-opacity duration-300" :class="section2Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">useMouse.js</span>
        <span class="absolute transition-opacity duration-300" :class="section3Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">global.js</span>
      </div>
      <div class="absolute top-[260px] left-[88px] text-gray-400 transition-opacity duration-300" :class="section1Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'">
        footer.vue
      </div>
      <img
        src="/assets/docs/framework/v3/auto-import/components-template.svg"
        class="absolute left-[250px] top-[62px] transition-opacity duration-300"
        :class="section1Steps.includes(currentSection) ? 'opacity-100' : 'opacity-0'"
        alt="Components template header and footer"
      >
      <DocsFrameworkV3AutoImportComponentsScript class="absolute left-[250px] top-1/2" :current-section="currentSection" :steps-section="section1Steps" />
      <DocsFrameworkV3AutoImportComposablesMouse class="absolute left-[250px] top-[62px]" :current-section="currentSection" :steps-section="section2Steps" />
      <DocsFrameworkV3AutoImportPluginsTemplate class="absolute left-[250px] top-[62px]" :current-section="currentSection" :steps-section="section3Steps" />
      <img
        src="/assets/docs/framework/v3/auto-import/container.svg"
        alt="animation container"
        class="absolute inset-0 z-0 text-gray-900 dark:text-gray-800"
        :class="[0, 6, 7, 13, 14].includes(currentSection) ? 'opacity-0' : 'opacity-80 dark:opacity-60'"
      >
    </div>
    <DocsFrameworkV3AutoImportTerminal :current-section="currentSection" />
  </div>
</template>

<script setup lang="ts">
import { useMotion } from '@vueuse/motion'

const props = defineProps({
  currentSection: {
    type: Number,
    default: 0
  },
  section1Steps: {
    type: Array,
    default: () => []
  },
  section2Steps: {
    type: Array,
    default: () => []
  },
  section3Steps: {
    type: Array,
    default: () => []
  }
})

const secondLineFolder = ref(null)
const secondLineMotion = useMotion(secondLineFolder,
  {
    initial: {
      opacity: 1,
      transition: {
        duration: 500
      }
    },
    in: {
      opacity: 1,
      transition: {
        duration: 500
      }
    },
    out: {
      opacity: 0,
      transition: {
        duration: 500
      }
    }
  }
)

watch(() => props.currentSection, () => {
  if (props.section2Steps.concat(props.section3Steps).includes(props.currentSection)) {
    secondLineMotion.apply('out')
  } else {
    secondLineMotion.apply('in')
  }
})

</script>
