<template>
  <div class="w-[801px] h-[415px] flex justify-center">
    <div class="absolute right-[156px]">
      <svg
        width="308"
        height="185"
        viewBox="0 0 308 185"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="text-gray-900 dark:text-gray-800"
      >
        <rect width="308" height="185" rx="12" fill="currentColor" />
        <path d="M18.226 27H17.022V17.2H18.226V27ZM20.1779 27V19.944H21.2979V21.302C21.4752 20.826 21.7692 20.462 22.1799 20.21C22.5906 19.958 23.0712 19.832 23.6219 19.832C24.4152 19.832 25.0499 20.0933 25.5259 20.616C26.0112 21.1387 26.2539 21.8293 26.2539 22.688V27H25.1339V22.87C25.1339 22.2633 24.9706 21.778 24.6439 21.414C24.3266 21.0407 23.9019 20.854 23.3699 20.854C22.7632 20.854 22.2639 21.0733 21.8719 21.512C21.4892 21.9507 21.2979 22.5107 21.2979 23.192V27H20.1779ZM31.1176 27.112C30.3989 27.112 29.7829 26.9533 29.2696 26.636C28.7563 26.3187 28.3643 25.8847 28.0936 25.334C27.8323 24.7833 27.7016 24.1627 27.7016 23.472C27.7016 22.7813 27.8323 22.1607 28.0936 21.61C28.3643 21.0593 28.7563 20.6253 29.2696 20.308C29.7829 19.9907 30.3943 19.832 31.1036 19.832C31.6076 19.832 32.0696 19.9487 32.4896 20.182C32.9189 20.406 33.2409 20.7093 33.4556 21.092V17.046H34.5756V27H33.4556V25.838C33.2409 26.2207 32.9189 26.5287 32.4896 26.762C32.0603 26.9953 31.6029 27.112 31.1176 27.112ZM31.2016 26.104C31.9109 26.104 32.4803 25.866 32.9096 25.39C33.3389 24.914 33.5536 24.2747 33.5536 23.472C33.5536 22.6693 33.3389 22.03 32.9096 21.554C32.4803 21.078 31.9109 20.84 31.2016 20.84C30.4923 20.84 29.9229 21.0827 29.4936 21.568C29.0736 22.044 28.8636 22.6787 28.8636 23.472C28.8636 24.2653 29.0736 24.9047 29.4936 25.39C29.9229 25.866 30.4923 26.104 31.2016 26.104ZM42.7751 24.732C42.6538 25.46 42.2991 26.0387 41.7111 26.468C41.1324 26.8973 40.4091 27.112 39.5411 27.112C38.8598 27.112 38.2531 26.9487 37.7211 26.622C37.1984 26.286 36.7878 25.838 36.4891 25.278C36.1998 24.718 36.0551 24.102 36.0551 23.43C36.0551 22.7393 36.1904 22.1233 36.4611 21.582C36.7411 21.0313 37.1331 20.602 37.6371 20.294C38.1411 19.986 38.7338 19.832 39.4151 19.832C40.0871 19.832 40.6704 19.9767 41.1651 20.266C41.6598 20.546 42.0378 20.938 42.2991 21.442C42.5698 21.946 42.7051 22.5107 42.7051 23.136C42.7051 23.332 42.6958 23.4953 42.6771 23.626H37.1611C37.2078 24.354 37.4504 24.9513 37.8891 25.418C38.3278 25.8847 38.8784 26.118 39.5411 26.118C40.1104 26.118 40.5724 26.0013 40.9271 25.768C41.2911 25.5253 41.5291 25.18 41.6411 24.732H42.7751ZM39.4151 20.784C38.8178 20.784 38.3278 20.952 37.9451 21.288C37.5624 21.624 37.3198 22.1047 37.2171 22.73H41.5571C41.5104 22.1327 41.2958 21.6613 40.9131 21.316C40.5398 20.9613 40.0404 20.784 39.4151 20.784ZM46.8556 23.29L49.4176 27H48.2276L46.2396 24.158L44.2516 27H43.0616L45.6236 23.29L43.2856 19.944H44.5316L46.2396 22.408L47.9476 19.944H49.1936L46.8556 23.29ZM50.5568 27V25.698H51.8308V27H50.5568ZM55.85 27H54.688L52.098 19.944H53.26L55.262 25.6L57.264 19.944H58.44L55.85 27ZM65.6152 19.944V27H64.4952V25.642C64.3179 26.1273 64.0239 26.496 63.6132 26.748C63.2119 26.9907 62.7312 27.112 62.1712 27.112C61.3779 27.112 60.7386 26.8507 60.2532 26.328C59.7772 25.8053 59.5392 25.1147 59.5392 24.256V19.944H60.6592V24.074C60.6592 24.6807 60.8179 25.1707 61.1352 25.544C61.4619 25.908 61.8912 26.09 62.4232 26.09C63.0299 26.09 63.5246 25.8753 63.9072 25.446C64.2992 25.0073 64.4952 24.4427 64.4952 23.752V19.944H65.6152ZM73.7829 24.732C73.6616 25.46 73.3069 26.0387 72.7189 26.468C72.1403 26.8973 71.4169 27.112 70.5489 27.112C69.8676 27.112 69.2609 26.9487 68.7289 26.622C68.2063 26.286 67.7956 25.838 67.4969 25.278C67.2076 24.718 67.0629 24.102 67.0629 23.43C67.0629 22.7393 67.1983 22.1233 67.4689 21.582C67.7489 21.0313 68.1409 20.602 68.6449 20.294C69.1489 19.986 69.7416 19.832 70.4229 19.832C71.0949 19.832 71.6783 19.9767 72.1729 20.266C72.6676 20.546 73.0456 20.938 73.3069 21.442C73.5776 21.946 73.7129 22.5107 73.7129 23.136C73.7129 23.332 73.7036 23.4953 73.6849 23.626H68.1689C68.2156 24.354 68.4583 24.9513 68.8969 25.418C69.3356 25.8847 69.8863 26.118 70.5489 26.118C71.1183 26.118 71.5803 26.0013 71.9349 25.768C72.2989 25.5253 72.5369 25.18 72.6489 24.732H73.7829ZM70.4229 20.784C69.8256 20.784 69.3356 20.952 68.9529 21.288C68.5703 21.624 68.3276 22.1047 68.2249 22.73H72.5649C72.5183 22.1327 72.3036 21.6613 71.9209 21.316C71.5476 20.9613 71.0483 20.784 70.4229 20.784Z" fill="#E2E8F0" />
      </svg>
      <div class="absolute w-full px-4 top-8 z-[5]">
        <input
          v-if="currentSection === 3"
          v-model="typedText.value"
          name="input"
          placeholder="// Try to type here"
          maxlength="30"
          class="w-full pt-4 text-white bg-transparent border-none appearance-none focus:outline-none"
        >
      </div>
    </div>
    <div class="flex flex-col items-center justify-center gap-y-4 w-[371px] h-full">
      <div class="bg-gray-400 rounded-lg pt-9 pb-9 w-[371px] h-[200px]" />
      <span v-if="typedText.value === ''" class="block italic text-gray-500">
        Type your text in code editor
      </span>
      <span class="u-text-gray-800">{{ typedText.value }}</span>
    </div>
  </div>
</template>

<script setup lang="ts">
defineProps({
  currentSection: {
    type: Number,
    default: 0
  }
})

const typedText = reactive({ value: '' })
const keyPressed = ref(false)
const timeoutId = ref()
const emit = defineEmits(['restart'])

onBeforeMount(() => {
  window.addEventListener('keypress', (e) => {
    keyPressed.value = true

    if (timeoutId) {
      clearTimeout(timeoutId.value)
    }

    timeoutId.value = setTimeout(() => {
      keyPressed.value = false
      emit('restart')
    }, 3000)
  })
})

onBeforeUnmount(() => {
  window.removeEventListener('keypress', () => {})
})
</script>
