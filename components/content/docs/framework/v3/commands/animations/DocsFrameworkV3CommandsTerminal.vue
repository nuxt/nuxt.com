<template>
  <div class="relative w-[308px] h-[128px] z-[10]">
    <svg
      width="308"
      height="126"
      viewBox="0 0 308 126"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      class="absolute text-gray-900 dark:text-gray-800"
    >
      <rect width="308" height="126" rx="12" fill="currentColor" />
      <path d="M21.837 85.121V87.228C22.397 87.2887 22.894 87.424 23.328 87.634C23.762 87.844 24.1237 88.0843 24.413 88.355L23.692 89.097C23.4213 88.845 23.132 88.6443 22.824 88.495C22.516 88.341 22.187 88.243 21.837 88.201V91.393C22.3083 91.547 22.747 91.7453 23.153 91.988C23.5637 92.2307 23.895 92.541 24.147 92.919C24.399 93.297 24.525 93.773 24.525 94.347C24.525 94.7903 24.4247 95.208 24.224 95.6C24.0233 95.9873 23.7223 96.3163 23.321 96.587C22.9243 96.853 22.4297 97.0257 21.837 97.105V99.142H20.892V97.147C20.2293 97.105 19.653 96.951 19.163 96.685C18.6777 96.419 18.2787 96.1343 17.966 95.831L18.666 95.054C18.96 95.3527 19.289 95.6023 19.653 95.803C20.0217 95.999 20.4347 96.1157 20.892 96.153V92.275C20.0753 92.0043 19.443 91.6567 18.995 91.232C18.5517 90.8027 18.33 90.2637 18.33 89.615C18.33 89.237 18.4233 88.8777 18.61 88.537C18.8013 88.1917 19.086 87.9 19.464 87.662C19.8467 87.424 20.3227 87.2793 20.892 87.228V85.121H21.837ZM21.837 92.604V96.09C22.7843 95.8987 23.258 95.3223 23.258 94.361C23.258 93.969 23.153 93.633 22.943 93.353C22.7377 93.073 22.369 92.8233 21.837 92.604ZM20.892 88.229C20.5093 88.2943 20.1943 88.4413 19.947 88.67C19.7043 88.894 19.583 89.202 19.583 89.594C19.583 89.9207 19.6717 90.1983 19.849 90.427C20.031 90.6557 20.3787 90.875 20.892 91.085V88.229Z" fill="#00DC82" />
      <path d="M20.508 27H19.304V18.278H16.168V17.2H23.63V18.278H20.508V27ZM29.7185 24.732C29.5971 25.46 29.2425 26.0387 28.6545 26.468C28.0758 26.8973 27.3525 27.112 26.4845 27.112C25.8031 27.112 25.1965 26.9487 24.6645 26.622C24.1418 26.286 23.7311 25.838 23.4325 25.278C23.1431 24.718 22.9985 24.102 22.9985 23.43C22.9985 22.7393 23.1338 22.1233 23.4045 21.582C23.6845 21.0313 24.0765 20.602 24.5805 20.294C25.0845 19.986 25.6771 19.832 26.3585 19.832C27.0305 19.832 27.6138 19.9767 28.1085 20.266C28.6031 20.546 28.9811 20.938 29.2425 21.442C29.5131 21.946 29.6485 22.5107 29.6485 23.136C29.6485 23.332 29.6391 23.4953 29.6205 23.626H24.1045C24.1511 24.354 24.3938 24.9513 24.8325 25.418C25.2711 25.8847 25.8218 26.118 26.4845 26.118C27.0538 26.118 27.5158 26.0013 27.8705 25.768C28.2345 25.5253 28.4725 25.18 28.5845 24.732H29.7185ZM26.3585 20.784C25.7611 20.784 25.2711 20.952 24.8885 21.288C24.5058 21.624 24.2631 22.1047 24.1605 22.73H28.5005C28.4538 22.1327 28.2391 21.6613 27.8565 21.316C27.4831 20.9613 26.9838 20.784 26.3585 20.784ZM34.1104 20.938C33.4384 20.938 32.9624 21.1993 32.6824 21.722C32.4118 22.2447 32.2764 22.968 32.2764 23.892V27H31.1564V19.944H32.2764V21.372C32.4258 20.8867 32.6544 20.5273 32.9624 20.294C33.2704 20.0607 33.6811 19.944 34.1944 19.944H35.0904V20.938H34.1104ZM36.2834 27V19.944H37.4034V21.302C37.5434 20.8633 37.8 20.5087 38.1734 20.238C38.556 19.9673 39.0087 19.832 39.5314 19.832C40.1194 19.832 40.6234 19.9627 41.0434 20.224C41.4634 20.4853 41.734 20.854 41.8554 21.33C41.986 20.9007 42.266 20.546 42.6954 20.266C43.1247 19.9767 43.6054 19.832 44.1374 19.832C44.9027 19.832 45.5 20.0747 45.9294 20.56C46.368 21.0453 46.5874 21.7127 46.5874 22.562V27H45.4674V22.856C45.4674 22.2493 45.3227 21.7593 45.0334 21.386C44.7534 21.0127 44.366 20.826 43.8714 20.826C43.2927 20.826 42.8354 21.0127 42.4994 21.386C42.1634 21.7593 41.9954 22.2493 41.9954 22.856V27H40.8754V22.856C40.8754 22.2493 40.7307 21.7593 40.4414 21.386C40.1614 21.0127 39.7787 20.826 39.2934 20.826C38.7054 20.826 38.2434 21.0127 37.9074 21.386C37.5714 21.7593 37.4034 22.2493 37.4034 22.856V27H36.2834ZM49.5577 27H48.4377V19.944H49.5577V27ZM48.3537 18.614V17.046H49.6417V18.614H48.3537ZM51.4045 27V19.944H52.5245V21.302C52.7018 20.826 52.9958 20.462 53.4065 20.21C53.8171 19.958 54.2978 19.832 54.8485 19.832C55.6418 19.832 56.2765 20.0933 56.7525 20.616C57.2378 21.1387 57.4805 21.8293 57.4805 22.688V27H56.3605V22.87C56.3605 22.2633 56.1971 21.778 55.8705 21.414C55.5531 21.0407 55.1285 20.854 54.5965 20.854C53.9898 20.854 53.4905 21.0733 53.0985 21.512C52.7158 21.9507 52.5245 22.5107 52.5245 23.192V27H51.4045ZM61.9548 19.832C62.8694 19.832 63.5928 20.07 64.1248 20.546C64.6661 21.022 64.9368 21.6567 64.9368 22.45V27H63.8168V25.782C63.6301 26.1833 63.3174 26.5053 62.8788 26.748C62.4494 26.9907 61.9594 27.112 61.4088 27.112C60.6714 27.112 60.0788 26.9207 59.6308 26.538C59.1828 26.146 58.9588 25.628 58.9588 24.984C58.9588 24.312 59.2108 23.78 59.7148 23.388C60.2281 22.9867 60.9141 22.786 61.7728 22.786H63.3688C63.5181 22.786 63.6301 22.7533 63.7048 22.688C63.7794 22.6133 63.8168 22.52 63.8168 22.408C63.8168 21.9133 63.6488 21.5213 63.3128 21.232C62.9768 20.9333 62.5148 20.784 61.9268 20.784C61.4134 20.784 60.9748 20.924 60.6108 21.204C60.2468 21.4747 60.0508 21.806 60.0228 22.198H58.9588C58.9961 21.75 59.1501 21.3487 59.4208 20.994C59.7008 20.63 60.0601 20.3453 60.4988 20.14C60.9468 19.9347 61.4321 19.832 61.9548 19.832ZM61.5768 26.16C62.2861 26.16 62.8368 25.9547 63.2288 25.544C63.6208 25.124 63.8168 24.55 63.8168 23.822V23.64H61.8428C61.3108 23.64 60.8861 23.7613 60.5688 24.004C60.2608 24.2373 60.1068 24.5593 60.1068 24.97C60.1068 25.334 60.2374 25.6233 60.4988 25.838C60.7694 26.0527 61.1288 26.16 61.5768 26.16ZM67.7699 27H66.6499V17.046H67.7699V27Z" fill="#E2E8F0" />
    </svg>
    <div class="absolute flex flex-col w-full">
      <div class="pt-12 pl-4 font-mono text-green-400 ">
        <span class="absolute transition-opacity duration-300" :class="(currentSection !== 4 && !currentStep) ? 'opacity-100' : 'opacity-0'">
          Compilation successfully
        </span>
        <span class="absolute transition-opacity duration-300" :class="currentStep === 0 ? 'opacity-100' : 'opacity-0'">0%</span>
        <span class="absolute transition-opacity duration-300" :class="currentStep === 1 ? 'opacity-100' : 'opacity-0'">100%</span>
      </div>
      <div class="font-mono text-gray-400 pt-[30px] pl-8" :class="currentSection === 0 ? 'opacity-0' : 'opacity-100'">
        <span class="absolute transition-opacity duration-300" :class="[1, 2].includes(currentSection) ? 'opacity-100' : 'opacity-0'">init</span>
        <span class="absolute transition-opacity duration-300" :class="currentStep === 0 ? 'opacity-100' : 'opacity-0'">...</span>
        <span class="absolute transition-opacity duration-300" :class="currentSection === 3 || currentStep === 1 ? 'opacity-100' : 'opacity-0'">waiting to compile...</span>
        <span class="absolute transition-opacity duration-300" :class="[5, 6, 7, 8, 9, 10, 11, 12].includes(currentSection) ? 'opacity-100' : 'opacity-0'">build</span>
      </div>
    </div>
    <div
      class="absolute w-[308px] h-[126px] bg-gray-600 rounded-xl transition-opacity duration-300"
      :class="[2, 6, 7].includes(currentSection) ? 'opacity-75' : 'opacity-0'"
    />
  </div>
</template>

<script setup lang="ts">
const props = defineProps({
  currentSection: {
    type: Number,
    default: 0
  }
})

const { startStepper, currentStep } = useCounterAnimations()

watch([() => props.currentSection], () => {
  if (props.currentSection === 4) {
    startStepper([2000, 2000])
  }
})
</script>
