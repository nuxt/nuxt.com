
<template>
  <UContainer :constrained="false" class="relative py-8 sm:py-12 md:py-16 lg:pb-16 lg:pt-28">
    <Swiper
      v-for="(swiper, index) in 3"
      :key="index"
      :modules="[Autoplay]"
      :slides-per-view="slidesPerView"
      :loop="true"
      :dir="index === 1 ? 'rtl' : 'ltr'"
      :autoplay="autoplay"
      :speed="5000"
      class="mb-2 sm:mb-8"
    >
      <SwiperSlide
        v-for="(module, i) in index === 0 ? modulesList.slice(0, 7) : index === 1 ? modulesList.slice(7, 14) : modulesList.slice(14)"
        :key="i"
        class="flex items-center justify-center w-[64px] sm:w-[92px] relative my-1"
        :style="{ height: '92px' }"
      >
        <NuxtLink
          class="relative flex items-center justify-center bg-white dark:bg-gray-900 h-[64px] w-[64px] sm:h-[92px] sm:w-[92px] rounded-md ring-1 ring-gray-200 hover:ring-0 dark:ring-0"
          :to="`/modules/${module.name}`"
        >
          <div class="hidden gradient-border gradient-border-dark dark:block" />
          <div class="dark:hidden gradient-border gradient-border-light" />
          <ModulesListItemCover :icon="`${module.name}.${module.format}`" :alt="module.name" icon-class="w-auto h-8 sm:h-12" />
        </NuxtLink>
      </SwiperSlide>
    </Swiper>
    <div class="w-full flex justify-center items-center pt-8">
      <UButton
        to="/modules"
        variant="primary-gradient"
        size="lg"
        :label="buttonText"
        truncate
      />
    </div>
    <div
      class="absolute top-24 left-0 h-full w-[20px] sm:w-[50px] md:w-[100px] lg:w-[200px] bg-gradient-to-r from-white via-white dark:from-black dark:via-black to-transparent z-[1]"
    />
    <div
      class="absolute top-24 right-0 h-full w-[20px] sm:w-[50px] md:w-[100px] lg:w-[200px] bg-gradient-to-l from-white via-white dark:from-black dark:via-black to-transparent z-[1]"
    />
  </UContainer>
</template>

<script setup lang="ts">
import type { PropType } from 'vue'
// Import Swiper Vue.js components
import { Swiper, SwiperSlide } from 'swiper/vue'
import { Autoplay } from 'swiper'
import { breakpointsTailwind, useBreakpoints } from '@vueuse/core'

// Import Swiper styles
import 'swiper/css'

defineProps({
  items: {
    type: Array as PropType<Object>,
    default: () => []
  },
  buttonText: {
    type: String,
    default: 'Explore Nuxt Modules'
  }
})

const modulesList = [
  {
    name: 'tailwindcss',
    format: 'png'
  },
  {
    name: 'i18n',
    format: 'png'
  },
  {
    name: 'content',
    format: 'png'
  },
  {
    name: 'pinia',
    format: 'svg'
  },
  {
    name: 'image',
    format: 'png'
  },
  {
    name: 'vueuse',
    format: 'svg'
  },
  {
    name: 'color-mode',
    format: 'png'
  },
  {
    name: 'prismic',
    format: 'png'
  },
  {
    name: 'windicss',
    format: 'svg'
  },
  {
    name: 'strapi',
    format: 'png'
  },
  {
    name: 'formkit',
    format: 'png'
  },
  {
    name: 'storyblok',
    format: 'png'
  },
  {
    name: 'sanity',
    format: 'png'
  },
  {
    name: 'icons',
    format: 'png'
  },
  {
    name: 'supabase',
    format: 'png'
  },
  {
    name: 'algolia',
    format: 'svg'
  },
  {
    name: 'directus',
    format: 'svg'
  },
  {
    name: 'unlighthouse',
    format: 'svg'
  },
  {
    name: 'meilisearch',
    format: 'svg'
  },
  {
    name: 'harlem',
    format: 'svg'
  },
  {
    name: 'fontaine',
    format: 'svg'
  }
]

const { smaller } = useBreakpoints(breakpointsTailwind)

const xs = smaller('sm')
const sm = smaller('md')
const md = smaller('lg')
const lg = smaller('xl')

const slidesPerView = computed(() => {
  if (xs.value) {
    return 4
  } else if (md.value || sm.value) {
    return 5
  } else if (lg.value) {
    return 6
  } else {
    return 7
  }
})
const autoplay = { delay: 0, pauseOnMouseEnter: true, disableOnInteraction: false }
</script>

<style scoped lang="postcss">
.swiper-wrapper {
  transition-timing-function: linear !important;
}

.gradient-border {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  width: calc(100% + 2px);
  height: calc(100% + 2px);
  background-size: 600% 600%;
  border-radius: 8px;
  z-index: -1;
  transform: translate(-1px, -1px);
}

.gradient-border-light {
  background: linear-gradient(var(--gradient-angle), rgba(0, 220, 130, 1), white, rgba(54, 228, 218, 0.5), rgba(29, 224, 177, 0.3));
}

.gradient-border-dark {
  background: linear-gradient(var(--gradient-angle), rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.1), white, rgba(255, 255, 255, 0.3));
}

.swiper-slide:hover {
  .gradient-border {
    opacity: 1;
    animation: gradient-rotate 5s linear 0s infinite reverse;
    transition: all 0.3s linear;
  }
}

@property --gradient-angle {
  syntax: '<angle>';
  inherits: false;
  initial-value: 360deg;
}

@keyframes gradient-rotate {
  0% {
    --gradient-angle: 360deg;
  }

  100% {
    --gradient-angle: 0deg;
  }
}
</style>
