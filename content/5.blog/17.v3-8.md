---
title: 'Nuxt 3.8'
description: "Nuxt 3.8 is out, bringing built-in DevTools, automatic Nuxt Image install, a new app manifest and much more."
navigation: false
image: /assets/blog/v3.8.png
authors:
  - name: Daniel Roe
    avatarUrl: https://github.com/danielroe.png
    link: https://twitter.com/danielcroe
date: 2023-10-19
category: Release
---

### üö® Built-in Nuxt DevTools

We've released v1.0.0 of the Nuxt DevTools and we now think it's ready to be shipped as a direct dependency of Nuxt.

üëâ You can check out [the release notes](https://github.com/nuxt/devtools/releases/tag/v1.0.0) for more information - and stay tuned for an article detailing our roadmap for the future.

### üíª Nuxi improvements

Just to remind you, we're now using [the new Nuxt CLI](https://github.com/nuxt/cli) which is now versioned separately. There are some exciting improvements there to follow, so do check out the latest releases. (For example, we now share the same port with the Vite websocket, meaning better support for docker containers in development.)

### üò¥ Nightly release channel

Every commit to the `main` branch of Nuxt is automatically deployed to a new release, for easier testing before releases. We've renamed this from the 'edge release channel' to the 'nightly release channel' to avoid confusion with _edge deployments_. And probably also with Microsoft Edge (though I haven't heard that anyone was confused with that one!)

‚û°Ô∏è `nuxt3` is now `nuxt-nightly`
‚û°Ô∏è `nuxi-edge` is now `nuxi-nightly`
‚û°Ô∏è `@‚Äãnuxt/kit-edge` is now `@‚Äãnuxt/kit-nightly`

... and so on.

You can read more about [how it works](https://nuxt.com/docs/guide/going-further/nightly-release-channel#nightly-release-channel).

### ‚öóÔ∏è Nitro v2.7

Nitro v2.7 has been released with lots of improvements and bug fixes - do check out [the full changelog](https://github.com/unjs/nitro/releases/tag/v2.7.0).

üî• One of the most significant is that we now save ~40% of bundle size in production by using native `fetch` (which is supported in Node 18+) ([#1724](https://github.com/unjs/nitro/pull/1724)). So if possible, we'd recommend you update your Node version to at least 18.

### üìä App Manifest

We now support a built-in app manifest (see [#21641](https://github.com/nuxt/nuxt/pull/21641)), which generates a manifest at `/_nuxt/builds/meta/<buildId>.json`.

Initially this enables loading payloads only for prerendered routes, if a site is static (preventing 404s). It also enables _client-side_ route rules. To begin with, only `redirect` route rules will have an effect; they will now redirect when performing client-side navigation. (More coming soon...!)

The app manifest also enables future enhancements including detection of outdated deployments by checking `/_nuxt/builds/latest.json`.

You can switch off this behaviour if you need to (but do let us know if you have any issues):

```ts
export default defineNuxtConfig({
  experimental: {
    appManifest: false
  }
})
```

### ü§ù Scope and context improvements

We now define a 'scope' for Nuxt composables executed in plugins ([#23667](https://github.com/nuxt/nuxt/pull/23667)), which allows running synchronous cleanup before navigating away from your site, using the Vue `onScopeDispose` lifecycle method. This should fix an edge case with cookies ([#23697](https://github.com/nuxt/nuxt/pull/23697)) and also improves memory management, for example in Pinia stores ([#23650](https://github.com/nuxt/nuxt/issues/23650)). You can [read more about Vue effect scopes](https://vuejs.org/api/reactivity-advanced.html#effectscope).

We also now support **native async context** for the _Vue composition API_ ([#23526](https://github.com/nuxt/nuxt/pull/23526)). In case you're unaware, we support native async context on Node and Bun, enabled with `experimental.asyncContext`. This can help address issues with missing a Nuxt instance. But it didn't previously affect missing _Vue_ instances.

If you experience issues with 'Nuxt instance unavailable', enabling this option may solve your issues, and once we have cross-runtime support we are likely to enable it by default.

```ts
export default defineNuxtConfig({
  experimental: {
    asyncContext: true
  }
})
```

### üîó NuxtLink defaults

We've supported defining your own `NuxtLink` components with the `defineNuxtLink` utility. We now support customising the options for the built-in `<NuxtLink>`, directly in your `nuxt.config` file ([#23724](https://github.com/nuxt/nuxt/pull/23724)). This can enable you to enforce trailing slash behaviour across your entire site, for example.

```ts
export default defineNuxtConfig({
  experimental: {
    defaults: {
      nuxtLink: {
        activeClass: 'nuxt-link-active',
        trailingSlash: 'append'
      }
    }
  }
})
```

### üìÇ Deeper layout scanning

üö® **This is a behaviour change so do take care with this one:** üö®

We now support scanning layouts within subfolders in `~/layouts` in the same way as we do with `~/components`. 

File | Layout name
-- | --
~/layouts/desktop/default.vue | 'desktop-default'
~/layouts/desktop-base/base.vue | 'desktop-base'
~/layouts/desktop/index.vue | 'desktop'

See [#20190](https://github.com/nuxt/nuxt/pull/20190) for more information


### ‚ö°Ô∏è Data fetching improvements: deep and caching

We have two very significant new features for `useAsyncData` and `useFetch`:

1. You can now set `deep: false` to prevent deep reactivity on the `data` object returned from these composables ([#23600](https://github.com/nuxt/nuxt/pull/23600)). It should be a performance improvement if you are returning large arrays or objects. The object will still update when refetched; it just won't trigger reactive effects if you change a property deep within the `data`.
2. You can now use the `getCachedData` option to handle custom caching for these composables ([#20747](https://github.com/nuxt/nuxt/pull/20747))

```ts
const nuxtApp = useNuxtApp()
const { data } = await useAsyncData(() => { /* fetcher */ }, {
  // this will not refetch if the key exists in the payload
  getCachedData: key => nuxtApp.payload.static[key] ?? nuxtApp.payload.data[key]
})
```

We also support configuring some default values for these composables in an app-wide way ([#23725](https://github.com/nuxt/nuxt/pull/20747)):

```ts
export default defineNuxtConfig({
  experimental: {
    defaults: {
      useAsyncData: {
        deep: false
      },
      useFetch: {
        retry: false,
        retryDelay: 100,
        retryStatusCodes: [500],
        timeout: 100
      }
    }
  }
})
```


### üî¢ Layer improvements

We now more carefully load layer plugins ([#22889](https://github.com/nuxt/nuxt/pull/22889) and [#23148](https://github.com/nuxt/nuxt/pull/23148)) and middleware ([#22925](https://github.com/nuxt/nuxt/pull/22925) and [#23552](https://github.com/nuxt/nuxt/pull/23552)) in the order of the layers, always loading your own plugins and middleware last. This should mean you can rely on utilities that layers may inject.

We've also added a test suite to cover these layer resolution changes.

And probably one of the most significant changes - if you are using remote layers we now clone these within your `node_modules/` folder ([#109](https://github.com/unjs/c12/pull/109)) so layers can use dependencies with your project. See [`c12` release notes](https://github.com/unjs/c12/releases/tag/v1.5.1) for full details.

### üì∏ Nuxt Image auto-install

We've now made `<NuxtImg>` and `<NuxtPicture>` first-class built-in components, [documenting them](https://github.com/nuxt/nuxt/pull/23741) and auto-installing `@nuxt/image` the first time that they are used ([#23717](https://github.com/nuxt/nuxt/pull/23717)).

https://github.com/nuxt/nuxt/assets/28706372/597c9307-5741-4d9c-8eab-aad5bfef2ef2

We would definitely advise using `@nuxt/image` if you're using images in your site; it can apply optimisations to make your site more performant.

### üí™ Type import changes

üö® **This is likely to need code changes in your project** üö®

Vue requires that type imports be explicit (so that the Vue compiler can correctly optimise and resolve type imports for props and so on). See [core Vue `tsconfig.json`](https://github.com/vuejs/tsconfig/blob/main/tsconfig.json#L30-L33).

We've therefore taken the decision to turn on `verbatimModuleSyntax` by default in Nuxt projects, which will throw a type error if types are imported without an explicit `type` import. To resolve it you will need to update your imports:

```diff
- import { someFunction, SomeOptions } from 'some-library'
+ import { someFunction } from 'some-library'
+ import type { SomeOptions } from 'some-library'
```

You may also encounter modules in the Nuxt ecosystem that need to be updated; please open an issue for those modules. I'm also very happy to help if you're encountering any problems with this, if you're a module author. Just tag me and I'll take a look.

If for whatever reason you need to undo this change in your project you can set the following configuration:

```ts
export default defineNuxtConfig({
  typescript: {
    tsConfig: {
      compilerOptions: {
        verbatimModuleSyntax: false
      }
    }
  }
})
```

However, we'd recommend only doing that temporarily, as Vue does need this option to be set for best results.


## ‚úÖ Upgrading

As usual, our recommendation for upgrading is to run:

```sh
nuxi upgrade
```